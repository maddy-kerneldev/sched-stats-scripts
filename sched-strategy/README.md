# sched-strategy-scripts/ftrace
#
Script to understand scheduler strategy

Script takes perf.data file generated using the commandline.

  perf record -e sched:sched_switch -a sleep 5

Use sched_switch to underistand the task affinity and scheduling trends

Script outputs a table with column like tid, pid, number of dispatches,
affinity,  %affinity along with count on small core (sc), big core(bc)
and other core(oc) scheduling. Sample table generated by script after
post processing perf.data file

 |        Process   |      tid|       pid  | #Disp |#affin |%affin |    #sc|   %sc |   #bc |   %bc |   #oc |   %oc |
 |------------------|---------|------------|-------|-------|-------|-------|-------|-------|-------|-------|-------|
 |LargeThreadPool   |  1812818|     1812644|    976|   718 | 73.57 |   227 | 23.26 |     4 |  0.41 |    27 |  2.77 |
 |LargeThreadPool   |  1814247|     1812644|    971|   702 | 72.30 |   225 | 23.17 |     6 |  0.62 |    38 |  3.91 |
 |LargeThreadPool   |  1812789|     1812644|    932|   688 | 73.82 |   218 | 23.39 |     3 |  0.32 |    23 |  2.47 |
 |LargeThreadPool   |  1812803|     1812644|   1012|   742 | 73.32 |   234 | 23.12 |     3 |  0.30 |    33 |  3.26 |
 |LargeThreadPool   |  1815733|     1812644|   1261|   910 | 72.16 |   299 | 23.71 |     2 |  0.16 |    50 |  3.97 |
 |LargeThreadPool   |  1813410|     1812644|   1038|   770 | 74.18 |   234 | 22.54 |     1 |  0.10 |    33 |  3.18 |
 |LargeThreadPool   |  1812776|     1812644|    993|   705 | 71.00 |   249 | 25.08 |     2 |  0.20 |    37 |  3.73 |
 |LargeThreadPool   |  1816298|     1812644|   1295|   927 | 71.58 |   305 | 23.55 |     6 |  0.46 |    57 |  4.40 |


Usage: 

 sudo perf script -i <path to perf.data> -s ./sched-strategy-script.py
